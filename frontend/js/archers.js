/**
 * @license
 * Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash -o ./dist/lodash.compat.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */

(function(e){function U(e,t,n){var r=(n||0)-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function z(e,t){var n=typeof t;e=e.cache;if(n=="boolean"||t==null)return e[t];n!="number"&&n!="string"&&(n="object");var r=n=="number"?t:o+t;return e=e[n]||(e[n]={}),n=="object"?e[r]&&U(e[r],t)>-1?0:-1:e[r]?0:-1}function W(e){var t=this.cache,n=typeof e;if(n=="boolean"||e==null)t[e]=!0;else{n!="number"&&n!="string"&&(n="object");var r=n=="number"?e:o+e,i=t[n]||(t[n]={});n=="object"?(i[r]||(i[r]=[])).push(e)==this.array.length&&(t[n]=!1):i[r]=!0}}function X(e){return e.charCodeAt(0)}function V(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function $(e){var t=-1,n=e.length,r=Q();r["false"]=r["null"]=r["true"]=r["undefined"]=!1;var i=Q();i.array=e,i.cache=r,i.push=W;while(++t<n)i.push(e[t]);return r.object===!1?(et(i),null):i}function J(e){return"\\"+F[e]}function K(){return n.pop()||[]}function Q(){return r.pop()||{args:"",array:null,bottom:"",cache:null,criteria:null,"false":!1,firstArg:"",index:0,init:"",leading:!1,loop:"",maxWait:0,"null":!1,number:null,object:null,push:null,shadowedProps:null,string:null,top:"",trailing:!1,"true":!1,"undefined":!1,useHas:!1,useKeys:!1,value:null}}function G(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function Y(){}function Z(e){e.length=0,n.length<a&&n.push(e)}function et(e){var t=e.cache;t&&et(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,r.length<a&&r.push(e)}function tt(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,i=n-t||0,s=Array(i<0?0:i);while(++r<i)s[r]=e[t+r];return s}function nt(n){function Ut(e){return e&&typeof e=="object"&&!sn(e)&&Et.call(e,"__wrapped__")?e:new zt(e)}function zt(e){this.__wrapped__=e}function Kt(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=jt.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){f=Gt(e.prototype);var l=e.apply(f,r);return Ln(l)?l:f}return e.apply(f,r)}var i=kn(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new at;t=e}return a}function Qt(){var e=Q();e.shadowedProps=x,e.array=e.bottom=e.loop=e.top="",e.init="iterable",e.useHas=!0,e.useKeys=!!un;for(var t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var s=R("errorClass, errorProto, hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+i+") {\n"+Xt(e)+"\n}");return et(e),s(O,lt,Et,rn,sn,Pn,un,Ut,ct,j,Rt,H,ht,Ct)}function Gt(e){return Ln(e)?Lt(e):{}}function Yt(e){return fn[e]}function Zt(e,t,n){var r=(r=Ut.indexOf)===vr?U:r;return r}function en(e){return function(n,r,i,s){return typeof r!="boolean"&&r!=null&&(s=i,i=!s||s[r]!==n?r:t,r=!1),i!=null&&(i=Ut.createCallback(i,s)),e(n,r,i,s)}}function tn(e){var n,r;return!e||Ct.call(e)!=D||(n=e.constructor,kn(n)&&!(n instanceof n))||!Wt.argsClass&&rn(e)||!Wt.nodeClass&&G(e)?!1:Wt.ownLast?(mn(e,function(e,t,n){return r=Et.call(n,t),!1}),r!==!1):(mn(e,function(e,t){r=t}),r===t||Et.call(e,r))}function nn(e){return ln[e]}function rn(e){return Ct.call(e)==N}function hn(e,n,r,i,s,o){var u=e;typeof n!="boolean"&&n!=null&&(i=r,r=n,n=!1);if(typeof r=="function"){r=typeof i=="undefined"?r:Ut.createCallback(r,i,1),u=r(u);if(typeof u!="undefined")return u;u=e}var a=Ln(u);if(a){var f=Ct.call(u);if(!B[f]||!Wt.nodeClass&&G(u))return u;var l=sn(u)}if(!a||!n)return a?l?tt(u):cn({},u):u;var c=qt[f];switch(f){case L:case A:return new c(+u);case _:case H:return new c(u);case P:return c(u.source,d.exec(u))}var h=!s;s||(s=K()),o||(o=K());var p=s.length;while(p--)if(s[p]==e)return o[p];return u=l?c(u.length):{},l&&(Et.call(e,"index")&&(u.index=e.index),Et.call(e,"input")&&(u.input=e.input)),s.push(e),o.push(u),(l?an:gn)(e,function(e,i){u[i]=hn(e,n,r,t,s,o)}),h&&(Z(s),Z(o)),u}function pn(e,t,n){return hn(e,!0,t,n)}function vn(e,t,n){var r;return t=Ut.createCallback(t,n),gn(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function yn(e){var t=[];return mn(e,function(e,n){kn(e)&&t.push(n)}),t.sort()}function bn(e,t){return e?Et.call(e,t):!1}function wn(e){var t=-1,n=un(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function En(e){return e===!0||e===!1||Ct.call(e)==L}function Sn(e){return e?typeof e=="object"&&Ct.call(e)==A:!1}function xn(e){return e?e.nodeType===1:!1}function Tn(e){var t=!0;if(!e)return t;var n=Ct.call(e),r=e.length;return n==C||n==H||(Wt.argsClass?n==N:rn(e))||n==D&&typeof r=="number"&&kn(e.splice)?!r:(gn(e,function(){return t=!1}),t)}function Nn(e,t,n,r,i,o){var u=n===s;if(typeof n=="function"&&!u){n=Ut.createCallback(n,r,2);var a=n(e,t);if(typeof a!="undefined")return!!a}if(e===t)return e!==0||1/e==1/t;var f=typeof e,l=typeof t;if(e===e&&(!e||f!="function"&&f!="object")&&(!t||l!="function"&&l!="object"))return!1;if(e==null||t==null)return e===t;var c=Ct.call(e),h=Ct.call(t);c==N&&(c=D),h==N&&(h=D);if(c!=h)return!1;switch(c){case L:case A:return+e==+t;case _:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case P:case H:return e==ut(t)}var p=c==C;if(!p){if(Et.call(e,"__wrapped__ ")||Et.call(t,"__wrapped__"))return Nn(e.__wrapped__||e,t.__wrapped__||t,n,r,i,o);if(c!=D||!Wt.nodeClass&&(G(e)||G(t)))return!1;var d=!Wt.argsObject&&rn(e)?st:e.constructor,v=!Wt.argsObject&&rn(t)?st:t.constructor;if(d!=v&&!(kn(d)&&d instanceof d&&kn(v)&&v instanceof v))return!1}var m=!i;i||(i=K()),o||(o=K());var g=i.length;while(g--)if(i[g]==e)return o[g]==t;var y=0;a=!0,i.push(e),o.push(t);if(p){g=e.length,y=t.length,a=y==e.length;if(!a&&!u)return a;while(y--){var b=g,w=t[y];if(u){while(b--)if(a=Nn(e[b],w,n,r,i,o))break}else if(!(a=Nn(e[y],w,n,r,i,o)))break}return a}return mn(t,function(t,s,u){if(Et.call(u,s))return y++,a=Et.call(e,s)&&Nn(e[s],t,n,r,i,o)}),a&&!u&&mn(e,function(e,t,n){if(Et.call(n,t))return a=--y>-1}),m&&(Z(i),Z(o)),a}function Cn(e){return Ot(e)&&!Mt(parseFloat(e))}function kn(e){return typeof e=="function"}function Ln(e){return!!e&&!!j[typeof e]}function An(e){return Mn(e)&&e!=+e}function On(e){return e===null}function Mn(e){return typeof e=="number"||Ct.call(e)==_}function Dn(e){return!!e&&!!j[typeof e]&&Ct.call(e)==P}function Pn(e){return typeof e=="string"||Ct.call(e)==H}function Hn(e){return typeof e=="undefined"}function Bn(e,t,n){var r=arguments,i=0,o=2;if(!Ln(e))return e;if(n===s)var u=r[3],a=r[4],f=r[5];else{var l=!0;a=K(),f=K(),typeof n!="number"&&(o=r.length),o>3&&typeof r[o-2]=="function"?u=Ut.createCallback(r[--o-1],r[o--],2):o>2&&typeof r[o-1]=="function"&&(u=r[--o])}while(++i<o)(sn(r[i])?Jn:gn)(r[i],function(t,n){var r,i,o=t,l=e[n];if(t&&((i=sn(t))||_n(t))){var c=a.length;while(c--)if(r=a[c]==t){l=f[c];break}if(!r){var h;if(u){o=u(l,t);if(h=typeof o!="undefined")l=o}h||(l=i?sn(l)?l:[]:_n(l)?l:{}),a.push(t),f.push(l),h||(l=Bn(l,t,s,u,a,f))}}else u&&(o=u(l,t),typeof o=="undefined"&&(o=t)),typeof o!="undefined"&&(l=o);e[n]=l});return l&&(Z(a),Z(f)),e}function jn(e,t,n){var r=Zt(),i=typeof t=="function",s={};if(i)t=Ut.createCallback(t,n);else var o=gt.apply(ft,jt.call(arguments,1));return mn(e,function(e,n,u){if(i?!t(e,n,u):r(o,n)<0)s[n]=e}),s}function Fn(e){var t=-1,n=un(e),i=n.length,s=r(i);while(++t<i){var o=n[t];s[t]=[o,e[o]]}return s}function In(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=gt.apply(ft,jt.call(arguments,1)),o=Ln(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=Ut.createCallback(t,n),mn(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function qn(e,t,n,r){var i=sn(e);t=Ut.createCallback(t,r,4);if(n==null)if(i)n=[];else{var s=e&&e.constructor,o=s&&s.prototype;n=Gt(o)}return(i?an:gn)(e,function(e,r,i){return t(n,e,r,i)}),n}function Rn(e){var t=-1,n=un(e),i=n.length,s=r(i);while(++t<i)s[t]=e[n[t]];return s}function Un(e){var t=-1,n=gt.apply(ft,jt.call(arguments,1)),i=n.length,s=r(i);Wt.unindexedChars&&Pn(e)&&(e=e.split(""));while(++t<i)s[t]=e[n[t]];return s}function zn(e,t,n){var r=-1,i=Zt(),s=e?e.length:0,o=!1;return n=(n<0?Dt(0,s+n):n)||0,s&&typeof s=="number"?o=(Pn(e)?e.indexOf(t,n):i(e,t,n))>-1:an(e,function(e){if(++r>=n)return!(o=e===t)}),o}function Wn(e,t,n){var r={};return t=Ut.createCallback(t,n),Jn(e,function(e,n,i){n=ut(t(e,n,i)),Et.call(r,n)?r[n]++:r[n]=1}),r}function Xn(e,t,n){var r=!0;t=Ut.createCallback(t,n);if(sn(e)){var i=-1,s=e.length;while(++i<s)if(!(r=!!t(e[i],i,e)))break}else an(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Vn(e,t,n){var r=[];t=Ut.createCallback(t,n);if(sn(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else an(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function $n(e,t,n){t=Ut.createCallback(t,n);if(!sn(e)){var o;return an(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function Jn(e,t,n){if(t&&typeof n=="undefined"&&sn(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else an(e,t,n);return e}function Kn(e,t,n){var r={};return t=Ut.createCallback(t,n),Jn(e,function(e,n,i){n=ut(t(e,n,i)),(Et.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Qn(e,t){var n=jt.call(arguments,2),i=-1,s=typeof t=="function",o=e?e.length:0,u=r(typeof o=="number"?o:0);return Jn(e,function(e){u[++i]=(s?t:e[t]).apply(e,n)}),u}function Gn(e,t,n){var i=-1,s=e?e.length:0,o=r(typeof s=="number"?s:0);t=Ut.createCallback(t,n);if(sn(e))while(++i<s)o[i]=t(e[i],i,e);else an(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function Yn(e,t,n){var r=-Infinity,i=r;if(!t&&sn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=!t&&Pn(e)?X:Ut.createCallback(t,n),an(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Zn(e,t,n){var r=Infinity,i=r;if(!t&&sn(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=!t&&Pn(e)?X:Ut.createCallback(t,n),an(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function tr(e,t,n,r){var i=arguments.length<3;t=Ut.createCallback(t,r,4);if(sn(e)){var s=-1,o=e.length;i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else an(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function nr(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=un(e);s=u.length}else Wt.unindexedChars&&Pn(e)&&(i=e.split(""));return t=Ut.createCallback(t,r,4),Jn(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function rr(e,t,n){return t=Ut.createCallback(t,n),Vn(e,function(e,n,r){return!t(e,n,r)})}function ir(e){var t=-1,n=e?e.length:0,i=r(typeof n=="number"?n:0);return Jn(e,function(e){var n=yt(Bt()*(++t+1));i[t]=i[n],i[n]=e}),i}function sr(e){var t=e?e.length:0;return typeof t=="number"?t:un(e).length}function or(e,t,n){var r;t=Ut.createCallback(t,n);if(sn(e)){var i=-1,s=e.length;while(++i<s)if(r=t(e[i],i,e))break}else an(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function ur(e,t,n){var i=-1,s=e?e.length:0,o=r(typeof s=="number"?s:0);t=Ut.createCallback(t,n),Jn(e,function(e,n,r){var s=o[++i]=Q();s.criteria=t(e,n,r),s.index=i,s.value=e}),s=o.length,o.sort(V);while(s--){var u=o[s];o[s]=u.value,et(u)}return o}function ar(e){return e&&typeof e.length=="number"?Wt.unindexedChars&&Pn(e)?e.split(""):tt(e):Rn(e)}function lr(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function cr(e){var t=-1,n=Zt(),r=e?e.length:0,i=gt.apply(ft,jt.call(arguments,1)),s=[],o=r>=u&&n===U;if(o){var a=$(i);a?(n=z,i=a):o=!1}while(++t<r){var f=e[t];n(i,f)<0&&s.push(f)}return o&&et(i),s}function hr(e,t,n){var r=-1,i=e?e.length:0;t=Ut.createCallback(t,n);while(++r<i)if(t(e[r],r,e))return r;return-1}function pr(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=Ut.createCallback(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return tt(e,0,Pt(Dt(0,r),i))}}function vr(e,t,n){if(typeof n=="number"){var r=e?e.length:0;n=n<0?Dt(0,r+n):n||0}else if(n){var i=Sr(e,t);return e[i]===t?i:-1}return e?U(e,t,n):-1}function mr(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=Ut.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return tt(e,0,Pt(Dt(0,i-r),i))}function gr(e){var t=arguments,n=t.length,r=-1,i=K(),s=-1,o=Zt(),a=e?e.length:0,f=[],l=K();while(++r<n){var c=t[r];i[r]=o===U&&(c?c.length:0)>=u&&$(r?t[r]:l)}e:while(++s<a){var h=i[0];c=e[s];if((h?z(h,c):o(l,c))<0){r=n,(h||l).push(c);while(--r){h=i[r];if((h?z(h,c):o(t[r],c))<0)continue e}f.push(c)}}while(n--)h=i[n],h&&et(h);return Z(i),Z(l),f}function yr(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=Ut.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return tt(e,Dt(0,i-r))}}function br(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?Dt(0,r+n):Pt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function wr(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var i=-1,s=Dt(0,vt((t-e)/n)),o=r(s);while(++i<s)o[i]=e,e+=n;return o}function Er(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=Ut.createCallback(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:Dt(0,t);return tt(e,r)}function Sr(e,t,n,r){var i=0,s=e?e.length:i;n=n?Ut.createCallback(n,r,1):Xr,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function xr(e){return sn(e)||(arguments[0]=e?jt.call(e):ft),Tr(gt.apply(ft,arguments))}function Nr(e){var t=-1,n=e?Yn(er(e,"length")):0,i=r(n<0?0:n);while(++t<n)i[t]=er(e,t);return i}function Cr(e){return cr(e,jt.call(arguments,1))}function kr(e){return e?Nr(arguments):[]}function Lr(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function Ar(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function Or(e,t){return Wt.fastBind||kt&&arguments.length>2?kt.call.apply(kt,arguments):Kt(e,t,jt.call(arguments,2))}function Mr(e){var t=arguments.length>1?gt.apply(ft,jt.call(arguments,1)):yn(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=Or(e[i],e)}return e}function _r(e,t){return Kt(e,t,jt.call(arguments,2),s)}function Dr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function Pr(e,t,n){if(e==null)return Xr;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=un(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=Nn(t[i[n]],e[i[n]],s)))break;return r}}return typeof t=="undefined"||m&&!m.test(bt.call(e))?e:n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}}function Hr(e,t,n){function h(){mt(f),mt(l),o=0,f=l=null}function p(){var t=c&&(!v||o>1);h(),t&&(a!==!1&&(u=new F),i=e.apply(s,r))}function d(){h();if(c||a!==t)u=new F,i=e.apply(s,r)}var r,i,s,o=0,u=0,a=!1,f=null,l=null,c=!0;t=Dt(0,t||0);if(n===!0){var v=!0;c=!1}else Ln(n)&&(v=n.leading,a="maxWait"in n&&Dt(t,n.maxWait||0),c="trailing"in n?n.trailing:c);return function(){r=arguments,s=this,o++,mt(l);if(a===!1)v&&o<2&&(i=e.apply(s,r));else{var n=new F;!f&&!v&&(u=n);var c=a-(n-u);c<=0?(mt(f),f=null,u=n,i=e.apply(s,r)):f||(f=Nt(d,c))}return t!==a&&(l=Nt(p,t)),i}}function Br(e){var n=jt.call(arguments,1);return Nt(function(){e.apply(t,n)},1)}function jr(e,n){var r=jt.call(arguments,2);return Nt(function(){e.apply(t,r)},n)}function Fr(e,t){function n(){var r=n.cache,i=o+(t?t.apply(this,arguments):arguments[0]);return Et.call(r,i)?r[i]:r[i]=e.apply(this,arguments)}return n.cache={},n}function Ir(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function qr(e){return Kt(e,jt.call(arguments,1))}function Rr(e){return Kt(e,jt.call(arguments,1),null,s)}function Ur(e,t,n){var r=!0,i=!0;n===!1?r=!1:Ln(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n=Q(),n.leading=r,n.maxWait=t,n.trailing=i;var s=Hr(e,t,n);return et(n),s}function zr(e,t){return function(){var n=[e];return St.apply(n,arguments),t.apply(this,n)}}function Wr(e){return e==null?"":ut(e).replace(w,Yt)}function Xr(e){return e}function Vr(e){Jn(yn(e),function(t){var n=Ut[t]=e[t];Ut.prototype[t]=function(){var e=this.__wrapped__,t=[e];St.apply(t,arguments);var r=n.apply(Ut,t);return e&&typeof e=="object"&&e===r?this:new zt(r)}})}function $r(){return n._=pt,this}function Kr(e,t){e==null&&t==null&&(t=1),e=+e||0,t==null?(t=e,e=0):t=+t||0;var n=Bt();return e%1||t%1?e+Pt(n*(t-e+parseFloat("1e-"+((n+"").length-1))),t):e+yt(n*(t-e+1))}function Qr(e,n){var r=e?e[n]:t;return kn(r)?e[n]():r}function Gr(e,n,r){var i=Ut.templateSettings;e||(e=""),r=dn({},r,i);var s=dn({},r.imports,i.imports),o=un(s),u=Rn(s),a,h=0,d=r.interpolate||b,m="__p += '",g=ot((r.escape||b).source+"|"+d.source+"|"+(d===v?p:b).source+"|"+(r.evaluate||b).source+"|$","g");e.replace(g,function(t,n,r,i,s,o){return r||(r=i),m+=e.slice(h,o).replace(E,J),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),m+="';\n";var y=r.variable,w=y;w||(y="obj",m="with ("+y+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+y+") {\n"+(w?"":y+" || ("+y+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var S="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+T++ +"]")+"\n*/";try{var x=R(o,"return "+m+S).apply(t,u)}catch(N){throw N.source=m,N}return n?x(n):(x.source=m,x)}function Yr(e,t,n){e=(e=+e)>-1?e:0;var i=-1,s=r(e);t=Ut.createCallback(t,n,1);while(++i<e)s[i]=t(i);return s}function Zr(e){return e==null?"":ut(e).replace(h,nn)}function ei(e){var t=++i;return ut(e==null?"":e)+t}function ti(e,t){return t(e),e}function ni(){return ut(this.__wrapped__)}function ri(){return this.__wrapped__}n=n?rt.defaults(e.Object(),n,rt.pick(e,S)):e;var r=n.Array,a=n.Boolean,F=n.Date,I=n.Error,R=n.Function,W=n.Math,it=n.Number,st=n.Object,ot=n.RegExp,ut=n.String,at=n.TypeError,ft=[],lt=I.prototype,ct=st.prototype,ht=ut.prototype,pt=n._,dt=ot("^"+ut(ct.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),vt=W.ceil,mt=n.clearTimeout,gt=ft.concat,yt=W.floor,bt=R.prototype.toString,wt=dt.test(wt=st.getPrototypeOf)&&wt,Et=ct.hasOwnProperty,St=ft.push,xt=ct.propertyIsEnumerable,Tt=n.setImmediate,Nt=n.setTimeout,Ct=ct.toString,kt=dt.test(kt=Ct.bind)&&kt,Lt=dt.test(Lt=st.create)&&Lt,At=dt.test(At=r.isArray)&&At,Ot=n.isFinite,Mt=n.isNaN,_t=dt.test(_t=st.keys)&&_t,Dt=W.max,Pt=W.min,Ht=n.parseInt,Bt=W.random,jt=ft.slice,Ft=dt.test(n.attachEvent),It=kt&&!/\n|true/.test(kt+Ft),qt={};qt[C]=r,qt[L]=a,qt[A]=F,qt[M]=R,qt[D]=st,qt[_]=it,qt[P]=ot,qt[H]=ut;var Rt={};Rt[C]=Rt[A]=Rt[_]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Rt[L]=Rt[H]={constructor:!0,toString:!0,valueOf:!0},Rt[O]=Rt[M]=Rt[P]={constructor:!0,toString:!0},Rt[D]={constructor:!0},function(){var e=x.length;while(e--){var t=x[e];for(var n in Rt)Et.call(Rt,n)&&!Et.call(Rt[n],t)&&(Rt[n][t]=!1)}}(),zt.prototype=Ut.prototype;var Wt=Ut.support={};(function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var i in new e)n.push(i);for(i in arguments);Wt.argsObject=arguments.constructor==st&&!(arguments instanceof r),Wt.argsClass=rn(arguments),Wt.enumErrorProps=xt.call(lt,"message")||xt.call(lt,"name"),Wt.enumPrototypes=xt.call(e,"prototype"),Wt.fastBind=kt&&!It,Wt.ownLast=n[0]!="x",Wt.nonEnumArgs=i!=0,Wt.nonEnumShadows=!/valueOf/.test(n),Wt.spliceObjects=(ft.splice.call(t,0,1),!t[0]),Wt.unindexedChars="x"[0]+st("x")[0]!="xx";try{Wt.nodeClass=Ct.call(document)!=D||!!({toString:0}+"")}catch(s){Wt.nodeClass=!0}})(1),Ut.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:Ut}};var Xt=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";";e.array?(t+="\nvar length = iterable.length; index = -1;\nif ("+e.array+") {  ",Wt.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+";\n  }\n}\nelse {  "):Wt.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+";\n    }\n  } else {  "),Wt.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  "),Wt.enumErrorProps&&(t+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];Wt.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),Wt.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))');if(e.useHas&&e.useKeys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }  ";else{t+="\n  for (index in iterable) {\n",e.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(t+="    if ("+n.join(" && ")+") {\n  "),t+=e.loop+";    ",n.length&&(t+="\n    }"),t+="\n  }    ";if(Wt.nonEnumShadows){t+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ";for(k=0;k<7;k++)t+="\n    index = '"+e.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",e.useHas||(t+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),t+=") {\n      "+e.loop+";\n    }      ";t+="\n  }    "}}if(e.array||Wt.nonEnumArgs)t+="\n}";return t+=e.bottom+";\nreturn result",t},Vt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},$t={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",array:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},Jt={top:"if (!objectTypes[typeof iterable]) return result;\n"+$t.top,array:!1};if(!Lt)var Gt=function(e){if(Ln(e)){Y.prototype=e;var t=new Y;Y.prototype=null}return t||{}};Wt.argsClass||(rn=function(e){return e?Et.call(e,"callee"):!1});var sn=At||function(e){return e?typeof e=="object"&&Ct.call(e)==C:!1},on=Qt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),un=_t?function(e){return Ln(e)?Wt.enumPrototypes&&typeof e=="function"||Wt.nonEnumArgs&&e.length&&rn(e)?on(e):_t(e):[]}:on,an=Qt($t),fn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ln=wn(fn),cn=Qt(Vt,{top:Vt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),dn=Qt(Vt),mn=Qt($t,Jt,{useHas:!1}),gn=Qt($t,Jt);kn(/x/)&&(kn=function(e){return typeof e=="function"&&Ct.call(e)==M});var _n=wt?function(e){if(!e||Ct.call(e)!=D||!Wt.argsClass&&rn(e))return!1;var t=e.valueOf,n=typeof t=="function"&&(n=wt(t))&&wt(n);return n?e==n||wt(e)==n:tn(e)}:tn,er=Gn,fr=Vn,dr=en(function ii(e,t,n){var r=-1,i=e?e.length:0,s=[];while(++r<i){var o=e[r];n&&(o=n(o,r,e)),sn(o)?St.apply(s,t?o:ii(o)):s.push(o)}return s}),Tr=en(function(e,t,n){var r=-1,i=Zt(),s=e?e.length:0,o=[],a=!t&&s>=u&&i===U,f=n||a?K():o;if(a){var l=$(f);l?(i=z,f=l):(a=!1,f=n?f:(Z(f),o))}while(++r<s){var c=e[r],h=n?n(c,r,e):c;if(t?!r||f[f.length-1]!==h:i(f,h)<0)(n||a)&&f.push(h),o.push(c)}return a?(Z(f.array),et(f)):n&&Z(f),o});It&&q&&typeof Tt=="function"&&(Br=Or(Tt,n));var Jr=Ht(g+"08")==8?Ht:function(e,t){return Ht(Pn(e)?e.replace(y,""):e,t||0)};return Ut.after=Ar,Ut.assign=cn,Ut.at=Un,Ut.bind=Or,Ut.bindAll=Mr,Ut.bindKey=_r,Ut.compact=lr,Ut.compose=Dr,Ut.countBy=Wn,Ut.createCallback=Pr,Ut.debounce=Hr,Ut.defaults=dn,Ut.defer=Br,Ut.delay=jr,Ut.difference=cr,Ut.filter=Vn,Ut.flatten=dr,Ut.forEach=Jn,Ut.forIn=mn,Ut.forOwn=gn,Ut.functions=yn,Ut.groupBy=Kn,Ut.initial=mr,Ut.intersection=gr,Ut.invert=wn,Ut.invoke=Qn,Ut.keys=un,Ut.map=Gn,Ut.max=Yn,Ut.memoize=Fr,Ut.merge=Bn,Ut.min=Zn,Ut.omit=jn,Ut.once=Ir,Ut.pairs=Fn,Ut.partial=qr,Ut.partialRight=Rr,Ut.pick=In,Ut.pluck=er,Ut.range=wr,Ut.reject=rr,Ut.rest=Er,Ut.shuffle=ir,Ut.sortBy=ur,Ut.tap=ti,Ut.throttle=Ur,Ut.times=Yr,Ut.toArray=ar,Ut.transform=qn,Ut.union=xr,Ut.uniq=Tr,Ut.unzip=Nr,Ut.values=Rn,Ut.where=fr,Ut.without=Cr,Ut.wrap=zr,Ut.zip=kr,Ut.zipObject=Lr,Ut.collect=Gn,Ut.drop=Er,Ut.each=Jn,Ut.extend=cn,Ut.methods=yn,Ut.object=Lr,Ut.select=Vn,Ut.tail=Er,Ut.unique=Tr,Vr(Ut),Ut.chain=Ut,Ut.prototype.chain=function(){return this},Ut.clone=hn,Ut.cloneDeep=pn,Ut.contains=zn,Ut.escape=Wr,Ut.every=Xn,Ut.find=$n,Ut.findIndex=hr,Ut.findKey=vn,Ut.has=bn,Ut.identity=Xr,Ut.indexOf=vr,Ut.isArguments=rn,Ut.isArray=sn,Ut.isBoolean=En,Ut.isDate=Sn,Ut.isElement=xn,Ut.isEmpty=Tn,Ut.isEqual=Nn,Ut.isFinite=Cn,Ut.isFunction=kn,Ut.isNaN=An,Ut.isNull=On,Ut.isNumber=Mn,Ut.isObject=Ln,Ut.isPlainObject=_n,Ut.isRegExp=Dn,Ut.isString=Pn,Ut.isUndefined=Hn,Ut.lastIndexOf=br,Ut.mixin=Vr,Ut.noConflict=$r,Ut.parseInt=Jr,Ut.random=Kr,Ut.reduce=tr,Ut.reduceRight=nr,Ut.result=Qr,Ut.runInContext=nt,Ut.size=sr,Ut.some=or,Ut.sortedIndex=Sr,Ut.template=Gr,Ut.unescape=Zr,Ut.uniqueId=ei,Ut.all=Xn,Ut.any=or,Ut.detect=$n,Ut.findWhere=$n,Ut.foldl=tr,Ut.foldr=nr,Ut.include=zn,Ut.inject=tr,gn(Ut,function(e,t){Ut.prototype[t]||(Ut.prototype[t]=function(){var t=[this.__wrapped__];return St.apply(t,arguments),e.apply(Ut,t)})}),Ut.first=pr,Ut.last=yr,Ut.take=pr,Ut.head=pr,gn(Ut,function(e,t){Ut.prototype[t]||(Ut.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==null||n&&typeof t!="function"?r:new zt(r)})}),Ut.VERSION="1.3.1",Ut.prototype.toString=ni,Ut.prototype.value=ri,Ut.prototype.valueOf=ri,an(["join","pop","shift"],function(e){var t=ft[e];Ut.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),an(["push","reverse","sort","unshift"],function(e){var t=ft[e];Ut.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),an(["concat","slice","splice"],function(e){var t=ft[e];Ut.prototype[e]=function(){return new zt(t.apply(this.__wrapped__,arguments))}}),Wt.spliceObjects||an(["pop","shift","splice"],function(e){var t=ft[e],n=e=="splice";Ut.prototype[e]=function(){var e=this.__wrapped__,r=t.apply(e,arguments);return e.length===0&&delete e[0],n?new zt(r):r}}),Ut}var t,n=[],r=[],i=0,s={},o=+(new Date)+"",u=75,a=40,f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/\w*$/,v=/<%=([\s\S]+?)%>/g,m=(m=/\bthis\b/)&&m.test(nt)&&m,g=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",y=RegExp("^["+g+"]*0+(?=.$)"),b=/($^)/,w=/[&<>"']/g,E=/['\n\r\t\u2028\u2029\\]/g,S=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],x=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],T=0,N="[object Arguments]",C="[object Array]",L="[object Boolean]",A="[object Date]",O="[object Error]",M="[object Function]",_="[object Number]",D="[object Object]",P="[object RegExp]",H="[object String]",B={};B[M]=!1,B[N]=B[C]=B[L]=B[A]=B[_]=B[D]=B[P]=B[H]=!0;var j={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},F={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},I=j[typeof exports]&&exports,q=j[typeof module]&&module&&module.exports==I&&module,R=j[typeof global]&&global;R&&(R.global===R||R.window===R)&&(e=R);var rt=nt();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=rt,define("lodash",[],function(){return rt})):I&&!I.nodeType?q?(q.exports=rt)._=rt:I._=rt:e._=rt})(this),define("messaging/message",["lodash","messaging"],function(e){return Message=function(){},Message.from=function(t){var n=new this,r=function(n){if(n instanceof ArrayBuffer){var r=require("messaging"),i=new DataView(n),s=0,o=0,u,a,f,l;while(s<t.byteformat.length)u=t.byteformat.charAt(s),format=r.format[u],l=r.extractValue(i["get"+format](o),u),this[t.format[s]]=l,o+=r.getTypeByteLength(format),s++}else e.extend(this,n)};return n.toBuffer=function(){var e=require("messaging"),n=e.calcByteSize(t),r=ArrayBuffer(n),i=new DataView(r),s=0,o=0,u,a,f;while(s<t.byteformat.length)a=t.byteformat.charAt(s),u=e.format[a],f=this[t.format[s]],i["set"+u](o,f),o+=e.getTypeByteLength(u),s++;return r},n.schema=t,r.prototype=n,r.prototype.constructor=r,r.extend=arguments.calee,r.schema=t,r},Message}),define("messaging/frame",["messaging/message"],function(e){var t={id:1,format:["id","x","y","direction","state"],byteformat:"IffBB"},n=e.from(t);return n}),define("messaging/update",["messaging/message"],function(e){var t={id:2,format:["id","center","remove"],byteformat:"I??"},n=e.from(t);return n}),define("messaging/useraction",["messaging/message"],function(e){var t={id:3,format:["action","direction"],byteformat:"BB"},n=e.from(t);return n}),define("messaging",["require","lodash","messaging/frame","messaging/update","messaging/useraction"],function(e,t,n,r,i){var s={format:{b:"Int8",B:"Uint8","?":"Uint8",h:"Int16",H:"Uint16",i:"Int32",I:"Uint32",f:"Float32",d:"Float64"},messages:{1:n,2:r,3:i},copyBytes:function(e,t,n,r,i){var s=new Uint8Array(t,r);s.set(new Uint8Array(e,n,i))},getTypeByteLength:function(e){return window[e+"Array"].BYTES_PER_ELEMENT},calcByteSize:function(e){var t=0,n=0,r;while(n<e.byteformat.length)r=this.format[e.byteformat.charAt(n)],t+=this.getTypeByteLength(r),n++;return t},extractValue:function(e,t){return t==="?"&&(e=!!e),e},fromBuffer:function(e){var t=new DataView(e),n=this.messages[t.getUint8(0)],r=this.calcByteSize(n.schema),i=1,s,o=[];while(i<e.byteLength)s=new n(e.slice(i,i+r)),o.push(s),i+=r;return o},toBuffer:function(e){var t=1,n=0,r,i,s,o,u;if(e.length){r=this.messages[e[0].constructor.schema.id],o=this.calcByteSize(e[0].constructor.schema),t+=e.length*o,i=new ArrayBuffer(t),s=new DataView(i),s.setUint8(0,e[0].constructor.schema.id),n=1;while(e.length)u=e.shift(),this.copyBytes(u.toBuffer(),i,0,n,o),n+=o;return i}return new ArrayBuffer(0)}};return s}),requirejs.config({baseUrl:"src/",paths:{lodash:"../components/lodash/dist/lodash.compat"}}),requirejs(["messaging","lodash"],function(e,t){var n=new WebSocket("ws://localhost:9000");n.binaryType="arraybuffer",n.onopen=function(){var r={},i=document.getElementById("update");n.onmessage=function(n){messages=e.fromBuffer(n.data),messages[0].schema.id===2&&messages.forEach(function(e){e.remove?(console.log(e),delete r[messages[0].id]):r[e.id]={id:e.id}}),messages[0].schema.id===1&&messages.forEach(function(e){r[e.id]&&(r[e.id].x=e.x,r[e.id].y=e.y)}),i.textContent="",t.forEach(r,function(e){i.textContent+="object "+e.id+":  x:"+e.x+", y:"+e.y+"\n"})}}}),define("archers",function(){});